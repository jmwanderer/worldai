<!DOCTYPE html>
<html lang="en">
  <head>
    <title>WorldAI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"/>
    <link href='https://fonts.googleapis.com/css?family=Open Sans' rel='stylesheet'/>
    <style>
      body {
	  font-family: 'Open Sans';
      }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>


  <body>
    <div id="content"> 
    </div>
  </body>


  <script>
    const content = document.getElementById("content")
    const url = "{{ url_for('worldai.get_view') }}";
    {% if wid is none %}
    const wid = null;
    {% else %}
    const wid = '{{ wid }}';
    {% endif %}
    
    {% if cid is none %}
    const cid = null;
    {% else %}
    const cid = '{{ cid }}';
    {% endif %}

    async function loadContent(obj_key) {
        const response = await fetch(url, {
            method: 'POST',
            body: JSON.stringify(obj_key),
            headers: {
                'Content-Type': 'application/json',
                "Authorization": "Bearer {{auth_key}}"                
            }
        });

        const values = await response.text();
        console.log(values);
        content.innerHTML = values;
    }
    key = {}
    if (wid) {
        key['world'] = wid;
    }
    if (cid) {
        key['character'] = cid;
    }
        
    loadContent(key);

  </script>
  
</html>
