<!DOCTYPE html>
<html lang="en">
  <head>
    <title>WorldAI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"/>
    <link href='https://fonts.googleapis.com/css?family=Open Sans' rel='stylesheet'/>
    <style>
      body {
	  font-family: 'Open Sans';
      }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>

  <body>
    <div>
      <h1>JS Client</h1>
      <h2>Description:</h2>
      <div id="description"></div>

      <h2>Detail Notes:</h2>
      <div id="details"></div>
      <button id="load_get">Get</button>
      <button id="load_post">Post</button>      
    </div>
  </body>
  <script>
    const char_id = "{{ character.id }}";
    const world_id = "{{ world.id }}";    
    const load_get = document.getElementById("load_get")
    const load_post = document.getElementById("load_post")    
    const url = "{{ url_for('worldai.get_character', wid=world.id, cid=character.id, _external=True) }}";
    const userAction = async() => {
        const response = await fetch(url);
        const values = await response.json();
        document.getElementById("description").innerHTML = values["description"];
        document.getElementById("details").innerHTML = values["details"];
    }
    load_get.onclick = userAction;

    const postAction = async() => {
        const response = await fetch(url, {
            method: 'POST',
            body: '"example contents in the body"',
            headers: {
                'Content-Type': 'application/json'
            }
        });
        const values = await response.json();
        document.getElementById("description").innerHTML = values["description"];
        document.getElementById("details").innerHTML = values["details"];
    }
    load_post.onclick = postAction;    
    
  </script>
</html>

